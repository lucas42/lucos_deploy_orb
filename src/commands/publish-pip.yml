description: "Builds and publishes a python pip package"
steps:
  - run:
      name: Build Python Package
      command: |
        source $BASH_ENV
        sed -i "s/0.0.0-managed/$NEXT_VERSION/g" pyproject.toml
        python3 -m pip install --user build
        python3 -m build
  - run:
      name: Publish to PyPI
      command: |
        python3 -m pip install --user twine
        python3 -m twine upload --skip-existing dist/*